.. _doc_instancing:

Инстанцирование
==========

Обоснование
---------

Создать сцену и набросать в нее узлы это работает для небольших проектов,
но по мере роста проекта, используется все больше и больше узлов 
и все быстро выходит из под контроля. Поэтому, Godot позволяет разделять
проект на несколько сцен. Но делает это не так как в других игровых движках.
На самом деле он делает это совсем не так так что не пропустите этот урок

Резуме: Сцена это коллекция узлов организованных в дерево, которое может
иметь только один корень.

.. image:: /img/tree.png

В Godot, сцену можно создать и сохранить на диск. Можно создать и сохранить
множество сцен.

.. image:: /img/instancingpre.png

Затем, при редактировании существующей или новой сцены, другие сцены 
могут быть инстанцированы как части этой сцены:

.. image:: /img/instancing.png

На картинке выше, Сцена B была добавлена в Сцену A как instance (экземпляр). 
Это может показаться странным на первый взгляд, но в конце этого урока мы
создадим полноценную сцену!

Инстанцирование, шаг за шагом
------------------------

Чтобы научится инстанцировать, давайте загрузим проект примера:
:download:`instancing.zip </files/instancing.zip>`.

Распакуйте эту сцену куда угодно. Затем добавьте эту сцену в проект
используя опцию 'Import':

.. image:: /img/importproject.png

Проще перейдите в папку проекта и откройте файл "engine.cfg". 
Новый проект появится в списке проектов. Редактируйте проект кнопкой 'Edit'.

Этот проект содержит две сцены "ball.scn" и "container.scn". Сцена
ball это просто мячик с физикой, в то время как контейнер сцена имеет
красивые формы столкновения, в которые можно бросить мячи.

.. image:: /img/ballscene.png

.. image:: /img/contscene.png

Откройте контейнер сцены, выберите корневой узел:

.. image:: /img/controot.png

Затем, нажмите кнопку в форме ссылки, это кнопка инстанцирования!

.. image:: /img/continst.png

Выделите сцену ball (ball.scn), мяч должен появиться в нулевой точке
(0,0), переместите его вокруг центра сцены вот так:

.. image:: /img/continstanced.png

Нажмите Play и вуаля!

.. image:: /img/playinst.png

Экземпляр мяча упал на дно ямы.

И еще
-------------

Экземпляров может быть столько сколько нужно для сцены,
просто попробуйте инстанцировать больше мячей, или
дублируйте их (ctrl-D или кнопка duplicate):

.. image:: /img/instmany.png

Теперь попробуйте снова запустить сцену:

.. image:: /img/instmanyrun.png

Круто? Так работает инстанцирование.

Редактирование экземпляров
-----------------

Выделите одну из множества копий мячей и перейдите в
редактор свойств. Давайте сделаем его более прыгучим, 
найдите параметр bounce и задайте ему 1.0:

.. image:: /img/instedit.png

Появится зеленая кнопка "revert" . Когда эта кнопка есть, 
Это означает что значения в данной сцены  отличаются от значения экземпляра. 
Даже если это значение изменить в оригинальной сцене, настроенные значения
всегда будут их перекрывать. Нажатие кнопки revert вернет значения к
установленным в оригинальной сцене.

Заключение
----------

Инстанцирование кажется удобным, но это больше чем кажется на первый взгляд!
Следующая часть урока должна охватить остальное..
